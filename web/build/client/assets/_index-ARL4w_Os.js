import{v as u,r as f,n as e}from"./components-qZBQBQPF.js";import{L as d,F as o,c as n,b as j,d as x,a as p}from"./Layout-Dy0sIyeH.js";import{F as m}from"./CheckCircleIcon-B6_8jjhy.js";const w=()=>[{title:"Dashboard - Teleport"},{name:"description",content:"Teleport Caddy Controller Dashboard"}];function _(){const{status:s,slaves:i,activeConfig:r,error:l}=u(),[a,g]=f.useState(!1),h=async()=>{g(!0),window.location.reload()};return l?e.jsx(d,{children:e.jsx("div",{className:"p-8",children:e.jsx("div",{className:"rounded-lg bg-error-50 border border-error-200 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(o,{className:"h-5 w-5 text-error-400"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-error-800",children:"Failed to load dashboard data"}),e.jsx("p",{className:"mt-1 text-sm text-error-700",children:l})]})]})})})}):e.jsx(d,{children:e.jsxs("div",{className:"p-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Overview of your Caddy fleet and configuration status"})]}),e.jsxs("button",{onClick:h,disabled:a,className:n("inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg shadow-sm","text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500","transition-colors duration-200",a&&"opacity-50 cursor-not-allowed"),children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),a?"Refreshing...":"Refresh"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(c,{title:"Total Slaves",value:(s==null?void 0:s.total_slaves)||0,icon:x,color:"primary"}),e.jsx(c,{title:"Enabled Slaves",value:(s==null?void 0:s.enabled_slaves)||0,icon:m,color:"success"}),e.jsx(c,{title:"In Sync",value:(s==null?void 0:s.slaves_in_sync)||0,icon:m,color:"success"}),e.jsx(c,{title:"With Errors",value:(s==null?void 0:s.slaves_with_errors)||0,icon:o,color:"error"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl border border-gray-200/50 shadow-glass p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(p,{className:"h-5 w-5 mr-2 text-primary-600"}),"Active Configuration"]})}),r?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Version ID:"}),e.jsx("p",{className:"text-sm text-gray-900 font-mono",children:r.version_id})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Description:"}),e.jsx("p",{className:"text-sm text-gray-900",children:r.description})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Created:"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(r.created_at).toLocaleString()})]})]}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No active configuration"})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl border border-gray-200/50 shadow-glass p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(x,{className:"h-5 w-5 mr-2 text-primary-600"}),"Slave Status"]})}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:i.length>0?i.slice(0,5).map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50/50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t.wireguard_ip})]}),e.jsx("span",{className:n("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",b(t.last_sync_status)),children:t.last_sync_status})]},t.id)):e.jsx("p",{className:"text-gray-500 text-sm",children:"No slaves configured"})})]})]})]})})}function c({title:s,value:i,icon:r,color:l}){const a={primary:"text-primary-600 bg-primary-50",success:"text-success-600 bg-success-50",error:"text-error-600 bg-error-50",warning:"text-warning-600 bg-warning-50"};return e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl border border-gray-200/50 shadow-glass p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:n("p-2 rounded-lg",a[l]),children:e.jsx(r,{className:"h-6 w-6"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i})]})]})})}function b(s){switch(s){case"success":return"text-success-700 bg-success-100";case"error":return"text-error-700 bg-error-100";case"pending":return"text-warning-700 bg-warning-100";case"syncing":return"text-primary-700 bg-primary-100";default:return"text-gray-700 bg-gray-100"}}export{_ as default,w as meta};
