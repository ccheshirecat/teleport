import{r,v as u,w as p,x as g,n as e,F as d}from"./components-qZBQBQPF.js";import{L as x,F as y,c as j,b as v}from"./Layout-Dy0sIyeH.js";import{F as m}from"./CheckCircleIcon-B6_8jjhy.js";function f({title:a,titleId:i,...n},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":i},n),a?r.createElement("title",{id:i},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"}))}const N=r.forwardRef(f);function b({title:a,titleId:i,...n},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":i},n),a?r.createElement("title",{id:i},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const w=r.forwardRef(b),L=()=>[{title:"History - Teleport"},{name:"description",content:"Configuration version history"}];function D(){const{history:a,error:i}=u(),n=p(),l=g(),[t,o]=r.useState(null),c=l.state==="submitting";return i?e.jsx(x,{children:e.jsx("div",{className:"p-8",children:e.jsx("div",{className:"rounded-lg bg-error-50 border border-error-200 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(y,{className:"h-5 w-5 text-error-400"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-error-800",children:"Failed to load configuration history"}),e.jsx("p",{className:"mt-1 text-sm text-error-700",children:i})]})]})})})}):e.jsx(x,{children:e.jsxs("div",{className:"p-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Configuration History"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"View and manage configuration version history"})]})}),n&&e.jsx("div",{className:j("mb-6 rounded-lg border p-4",n.success?"bg-success-50 border-success-200 text-success-800":"bg-error-50 border-error-200 text-error-800"),children:n.message}),t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Configuration Details - ",t.version_id]}),e.jsxs("button",{onClick:()=>o(null),className:"text-gray-400 hover:text-gray-600",children:[e.jsx("span",{className:"sr-only",children:"Close"}),"âœ•"]})]})}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Version ID:"}),e.jsx("p",{className:"text-sm text-gray-900 font-mono",children:t.version_id})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Description:"}),e.jsx("p",{className:"text-sm text-gray-900",children:t.description})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Created:"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(t.created_at).toLocaleString()})]})]}),t.is_active&&e.jsxs("div",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-success-100 text-success-800",children:[e.jsx(m,{className:"h-3 w-3 mr-1"}),"Currently Active"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-500 block mb-2",children:"JSON Configuration:"}),e.jsx("pre",{className:"bg-gray-50 rounded-lg p-4 text-sm text-gray-900 overflow-x-auto border",children:JSON.stringify(JSON.parse(t.json_config),null,2)})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>o(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors duration-200",children:"Close"}),!t.is_active&&e.jsxs(d,{method:"post",className:"inline",children:[e.jsx("input",{type:"hidden",name:"intent",value:"rollback"}),e.jsx("input",{type:"hidden",name:"version_id",value:t.version_id}),e.jsx("button",{type:"submit",disabled:c,onClick:()=>{confirm(`Are you sure you want to rollback to version ${t.version_id}?`)&&o(null)},className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 rounded-lg transition-colors duration-200 disabled:opacity-50",children:c?"Rolling back...":"Rollback to this Version"})]})]})]})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl border border-gray-200/50 shadow-glass overflow-hidden",children:a.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Version"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white/50 divide-y divide-gray-200",children:a.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors duration-200",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 font-mono",children:s.version_id}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.id.slice(0,8),"..."]})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:s.description})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:new Date(s.created_at).toLocaleDateString()}),e.jsx("div",{className:"text-sm text-gray-500",children:new Date(s.created_at).toLocaleTimeString()})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.is_active?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-success-100 text-success-800",children:[e.jsx(m,{className:"h-3 w-3 mr-1"}),"Active"]}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[e.jsx("button",{onClick:()=>o(s),className:"text-primary-600 hover:text-primary-900",title:"View details",children:e.jsx(w,{className:"h-4 w-4"})}),!s.is_active&&e.jsxs(d,{method:"post",className:"inline",children:[e.jsx("input",{type:"hidden",name:"intent",value:"rollback"}),e.jsx("input",{type:"hidden",name:"version_id",value:s.version_id}),e.jsx("button",{type:"submit",disabled:c,onClick:h=>{confirm(`Are you sure you want to rollback to version ${s.version_id}?`)||h.preventDefault()},className:"text-warning-600 hover:text-warning-900 disabled:opacity-50 disabled:cursor-not-allowed",title:"Rollback to this version",children:e.jsx(N,{className:"h-4 w-4"})})]})]})]},s.id))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(v,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No configuration history"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Configuration versions will appear here once you start making changes."})]})})]})})}export{D as default,L as meta};
