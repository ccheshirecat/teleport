import{r,v as b,w as y,x as N,n as e,F as v}from"./components-qZBQBQPF.js";import{L as u,F as w,c as C,a as g}from"./Layout-Dy0sIyeH.js";function k({title:s,titleId:t,...n},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const S=r.forwardRef(k);function E({title:s,titleId:t,...n},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const m=r.forwardRef(E);function O({title:s,titleId:t,...n},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const J=r.forwardRef(O),F=()=>[{title:"Configuration - Teleport"},{name:"description",content:"Manage Caddy configuration"}];function R(){const{activeConfig:s,error:t}=b(),n=y(),a=N(),[o,i]=r.useState(!1),[f,l]=r.useState(s!=null&&s.json_config?JSON.stringify(JSON.parse(s.json_config),null,2):""),[h,c]=r.useState(""),x=a.state==="submitting",p=()=>{s&&(l(JSON.stringify(JSON.parse(s.json_config),null,2)),c("")),i(!0)},j=()=>{i(!1),l(s!=null&&s.json_config?JSON.stringify(JSON.parse(s.json_config),null,2):""),c("")};return t?e.jsx(u,{children:e.jsx("div",{className:"p-8",children:e.jsx("div",{className:"rounded-lg bg-error-50 border border-error-200 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(w,{className:"h-5 w-5 text-error-400"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-error-800",children:"Failed to load configuration"}),e.jsx("p",{className:"mt-1 text-sm text-error-700",children:t})]})]})})})}):e.jsx(u,{children:e.jsxs("div",{className:"p-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Configuration Management"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your active Caddy configuration"})]}),s&&!o&&e.jsxs("button",{onClick:p,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200",children:[e.jsx(m,{className:"h-4 w-4 mr-2"}),"Edit Configuration"]})]})}),n&&e.jsx("div",{className:C("mb-6 rounded-lg border p-4",n.success?"bg-success-50 border-success-200 text-success-800":"bg-error-50 border-error-200 text-error-800"),children:n.message}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl border border-gray-200/50 shadow-glass",children:s||o?e.jsx("div",{className:"p-6",children:o?e.jsxs(v,{method:"post",onSubmit:()=>i(!1),children:[e.jsx("input",{type:"hidden",name:"intent",value:"update"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(m,{className:"h-5 w-5 mr-2 text-primary-600"}),"Edit Configuration"]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{type:"button",onClick:j,className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsxs("button",{type:"submit",disabled:x,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),x?"Saving...":"Save & Apply"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("input",{type:"text",name:"description",value:h,onChange:d=>c(d.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Describe this configuration change..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"JSON Configuration"}),e.jsx("textarea",{name:"json_config",value:f,onChange:d=>l(d.target.value),required:!0,rows:20,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent font-mono text-sm",placeholder:"Enter Caddy JSON configuration..."}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Enter valid Caddy JSON configuration. Changes will be applied to all enabled slaves."})]})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(g,{className:"h-5 w-5 mr-2 text-primary-600"}),"Active Configuration"]}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-success-100 text-success-800",children:"Active"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Version ID:"}),e.jsx("p",{className:"text-sm text-gray-900 font-mono",children:s.version_id})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Description:"}),e.jsx("p",{className:"text-sm text-gray-900",children:s.description})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Created:"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(s.created_at).toLocaleString()})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-500 block mb-2",children:"JSON Configuration:"}),e.jsx("pre",{className:"bg-gray-50 rounded-lg p-4 text-sm text-gray-900 overflow-x-auto border",children:JSON.stringify(JSON.parse(s.json_config),null,2)})]})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(g,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No active configuration"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating your first Caddy configuration."}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:()=>i(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-lg text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[e.jsx(m,{className:"h-4 w-4 mr-2"}),"Create Configuration"]})})]})})]})})}export{R as default,F as meta};
